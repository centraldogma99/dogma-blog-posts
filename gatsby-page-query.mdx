---
title: 'Gatsby - νμ΄μ§€ μΏΌλ¦¬(Page Query)'
subtitle: 'Gatsby νμ΄μ§€ μ»΄ν¬λ„νΈμ—μ„ νμ΄μ§€ μΏΌλ¦¬λ¥Ό ν†µν•΄ λ°μ΄ν„° λ μ΄μ–΄μ μ •λ³΄λ¥Ό κ°€μ Έμ¬ μ μλ‹¤.'
date: '2022-01-24'
draft: false
tag:
  - blog
  - gatsby
  - javascript
  - frontend
  - headless
  - react
  - graphql
  - html
---
## Page query
νμ΄μ§€ μΏΌλ¦¬λ€, **νμ΄μ§€ μ»΄ν¬λ„νΈ νμΌ ν•λ‚λ‹Ή ν•λ‚μ”© λ“¤μ–΄κ° μ μλ” GraphQL μΏΌλ¦¬μ΄λ‹¤.**  
λ‹¤μκ³Ό κ°™μ΄ [tagged template literal](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#tagged_templates) ν•νƒλ΅ μ„ μ–Έλλ©°, `export` ν‚¤μ›λ“λ΅ export λμ–΄μ•Ό gatsbyκ°€ νμ΄μ§€ μΏΌλ¦¬λ΅ μ²λ¦¬ν•΄ μ¤€λ‹¤.

```javascript
export const query = graphql`
  {
    allMdx {
      nodes {
        id
        slug
      }
    }
  }
`;
```

**νμ΄μ§€ μΏΌλ¦¬μ μ‹¤ν–‰ κ²°κ³Όλ¬Όμ€ κ·Έ νμΌμ— μ •μλ μ»΄ν¬λ„νΈμ— `data` propμΌλ΅ λ„κ²¨μ Έ, μ»΄ν¬λ„νΈ λ‚΄μ—μ„ μ ‘κ·Όν•  μ μκ² λλ‹¤.**  
μ•„λ μμ λ” λ¨λ“  mdxνμΌλ“¤μ μ΄λ¦„μ„ μ¶λ ¥ν•λ” μ»΄ν¬λ„νΈμ΄λ‹¤.  
(`gatsby-plugin-mdx` ν”λ¬κ·ΈμΈμ„ μ‚¬μ©ν•¨)

```javascript
const MdxNameListPage = ({ data }) => {
  /*
    dataλ” queryμ μ‹¤ν–‰ κ²°κ³Όμ΄λ―€λ΅, 
    {
      "allMdx": {
        "nodes": [
          {
            "slug": ...
          },
          {
            "slug": ...
          },
        ]
      }
    }
    μ™€ κ°™μ€ ν•νƒκ°€ λλ‹¤.
    GraphiQL(localhost:8000/___graphql) μ—μ„ ν™•μΈν•  μ μλ‹¤.
  */
  const nodes = data.allMdx.nodes;

  return (
    <div>
      {nodes.map((node, i) => (
        <p key={i}>{node.slug}</p>
      ))}
    </div>
  );
};

export const query = graphql`
  {
    allMdx {
      nodes {
        slug
      }
    }
  }
`;

export default MdxNameListPage;
```

## νμ΄μ§€ μΏΌλ¦¬μ— νλΌλ―Έν„° μ‚¬μ©ν•κΈ°

GraphQL μΏΌλ¦¬λ¥Ό μ“Έ λ• μ μν•  μ μ€ "**GraphQL μΏΌλ¦¬ μ„ μ–Έμ€ λΉλ“ μ¤‘μ— μ½”λ“μ—μ„ λ¶„λ¦¬λλ‹¤**"λ” κ²ƒμ΄λ‹¤.  
λ§μΈμ¦‰μ¨, `graphql` νƒκ·Έλ” λ‹¤λ¥Έ μλ°”μ¤ν¬λ¦½νΈ μ½”λ“κ°€ μ‹¤ν–‰λλ” κ²ƒμ²λΌ μ‹¤ν–‰λμ§€ μ•κ³ , νμ΄μ§€κ°€ λ λ”λ§λκΈ° μ „μ— λ¶„λ¦¬λμ–΄ gatsby λ‚΄λ¶€μ—μ„ λ”°λ΅ μ²λ¦¬λλ‹¤λ” κ²ƒμ΄λ‹¤.  
λ”°λΌμ„, [expression interpolation](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#expression_interpolation)κ³Ό κ°™μ€ JS λ¬Έλ²•μ„ μ‚¬μ©ν•  μ μ—†λ‹¤.

> ### π’΅ Expression interpolation μ΄λ€?
> 3λ² λΌμΈμ— μ‚¬μ©ν• κ²ƒκ³Ό κ°™μ€, ν…ν”λ¦Ώ λ¦¬ν„°λ΄μ— expressionμ„ μ‚½μ…ν•λ” λ¬Έλ²•μ„ μλ―Έν•λ‹¤.  
> λ³€μλΏλ§ μ•„λ‹λΌ `3 + 2`μ™€ κ°™μ€ μ–΄λ–¤ javascript ν‘ν„μ‹μ΄λ“ μ§€ λ„£μ„ μ μλ‹¤.
> ```javascript
> const name = 'dogma';
> const age = 3;
> const str = `my name is ${name}, and ${age} years old.`
> console.log(str);    // my name is dogma, and 3 years old.
> ```

Expression interpolation λ¬Έλ²•μ„ μ‚¬μ©ν•  μ μ—†λ‹¤λ©΄, λ¬Έμμ—΄ ν•νƒλ΅ μ „λ‹¬λλ” GraphQL μΏΌλ¦¬λ” λ™μ μΌλ΅(dynamically) μ‹¤ν–‰λ  μ μ—†κ³  ν•λ“μ½”λ”©λ§ κ°€λ¥ν• κ²ƒμΌκΉ?  
μ—¬κΈ°μ—μ„ *νμ΄μ§€ μΏΌλ¦¬*λ¥Ό μ‚¬μ©ν•λ” μ΄μ κ°€ λ‚μ¤λ”λ°, νμ΄μ§€ μΏΌλ¦¬μ μ°¨λ³„μ μ€ μ»΄ν¬λ„νΈ μΏΌλ¦¬μ™€λ” λ‹¤λ¥΄κ² **νλΌλ―Έν„°λ¥Ό λ°›μ„ μ μλ‹¤**λ” κ²ƒμ΄λ‹¤.  
  
μ•„λ μμ λ” νλΌλ―Έν„°λ΅ slug κ°’μ„ λ°›μ•„, μΌμΉν•λ” mdx λ…Έλ“μ idλ“¤μ„ λ¶λ¬μ¤λ” GraphQL μΏΌλ¦¬μ΄λ‹¤.
```
query($sl: String) {
  allMdx(filter: {slug: {eq: $sl}}) {
    nodes {
      id
    }
  }
}
```
`$sl`λ” μΏΌλ¦¬μ νλΌλ―Έν„°λ΅μ¨, μ›ν•λ” μ΄λ¦„ μ•μ— '$'λ¥Ό λ¶™μΈ ν•νƒμ΄λ‹¤.  
ν•„λ“ μ΄λ¦„κ³Όλ” κ΄€λ ¨μ—†μ΄ μ›ν•λ” μ•„λ¬΄ μ΄λ¦„μ΄λ‚ κ°€λ¥ν•λ‹¤λ” κ²ƒμ„ λ‚νƒ€λ‚΄κΈ° μ„ν•΄ `sl`μ΄λΌλ” μ΄λ¦„μ„ μ‚¬μ©ν–λ‹¤. 
μ΄ κ°’μ€ 2λ²μ§Έ μ¤„μ—μ„ ν•„ν„° μ΅°κ±΄ κ°’μΌλ΅ λ„κ²¨μ§€κ³  μλ” κ²ƒμ„ ν™•μΈν•  μ μλ‹¤.  

## λ§λ¬΄λ¦¬?

νλΌλ―Έν„°λ¥Ό λ°›λ” λ²•μ„ μ•μ•μΌλ‹ νλΌλ―Έν„°λ¥Ό λ³΄λ‚΄λ” λ²•μ— λ€ν•΄μ„λ„ μ•μ•„μ•Ό ν•  κ²ƒμ΄λ‹¤. 
  
ν•μ§€λ§ λ³Έ κΈ€μ λ‚΄μ©μ΄ κΈΈμ–΄μ§„ κ΄€κ³„λ΅, λ‹¤μ κΈ€μ—μ„ νμ΄μ§€ μƒμ„± μ‹ νμ΄μ§€ μΏΌλ¦¬μ— νλΌλ―Έν„° κ°’μ„ λ„κΈ°λ” λ°©λ²•μ— λ€ν•΄ μ„¤λ…ν•λ‹¤.

## μ°Έκ³ μλ£

[Querying Data in Pages with GraphQL](https://www.gatsbyjs.com/docs/how-to/querying-data/page-query/)  
[Gatsby tutorial part 4](https://www.gatsbyjs.com/docs/tutorial/part-4/)
